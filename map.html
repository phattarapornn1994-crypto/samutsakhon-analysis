<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô & ‡∏•‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á‡πÅ‡∏î‡∏á - ‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£</title>

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <!-- Heatmap plugin -->
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>

  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #0f172a;
      color: #f8fafc;
      margin: 0;
      padding: 0;
      display: grid;
      grid-template-rows: auto 1fr auto;
      height: 100vh;
    }

    header {
      background: #1e293b;
      padding: 12px 16px;
      border-bottom: 1px solid #334155;
      font-size: 14px;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    header .title {
      color: #fff;
      font-weight: 600;
      font-size: 14px;
      line-height: 1.4;
    }

    header nav a {
      color: #94a3b8;
      margin-right: 12px;
      text-decoration: none;
      font-size: 13px;
    }
    header nav a:hover {
      color: #fff;
    }

    #map-wrapper {
      position: relative;
      background: #000;
    }

    #map {
      width: 100%;
      height: 100%;
      min-height: 400px;
      position: absolute;
      inset: 0;
    }

    .info-panel {
      position: absolute;
      top: 16px;
      left: 16px;
      z-index: 500;
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(8px);
      border: 1px solid #334155;
      border-radius: 16px;
      padding: 16px 20px;
      max-width: 260px;
      box-shadow: 0 20px 60px rgb(0 0 0 / .7);
      font-size: 13px;
      line-height: 1.5;
      color: #cbd5e1;
    }

    .info-panel h2 {
      margin: 0 0 8px;
      font-size: 14px;
      font-weight: 600;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .legend-panel {
      position: absolute;
      bottom: 16px;
      left: 16px;
      z-index: 500;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid #334155;
      border-radius: 12px;
      padding: 12px 16px;
      font-size: 12px;
      color: #cbd5e1;
      line-height: 1.4;
      box-shadow: 0 20px 60px rgb(0 0 0 / .7);
    }

    .legend-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }

    .legend-dot {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 2px solid #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      box-shadow: 0 8px 16px rgb(0 0 0 / .5);
      font-weight: 600;
      color: #fff;
    }

    footer {
      color:#475569;
      background:#0f172a;
      font-size:12px;
      text-align:center;
      padding:12px 0 16px;
      border-top:1px solid #334155;
    }

    /* popup style */
    .leaflet-popup-content-wrapper {
      background:#1e293b;
      color:#f8fafc;
      border-radius:12px;
      border:1px solid #475569;
      box-shadow:0 20px 60px rgb(0 0 0 / .8);
    }
    .leaflet-popup-tip {
      background:#1e293b;
      border:1px solid #475569;
    }
    .popup-title {
      font-size:14px;
      font-weight:600;
      color:#fff;
      margin-bottom:4px;
      line-height:1.4;
    }
    .popup-desc {
      font-size:12px;
      color:#cbd5e1;
      line-height:1.4;
    }

    /* layer control dark mode */
    .leaflet-control-layers {
      background:#1e293b !important;
      border:1px solid #334155 !important;
      border-radius:12px !important;
      color:#fff !important;
      box-shadow:0 20px 60px rgb(0 0 0 / .8) !important;
      font-size:12px;
      line-height:1.4;
    }
    .leaflet-control-layers-expanded {
      background:#1e293b !important;
      color:#fff !important;
    }
    .leaflet-control-layers-list label {
      color:#cbd5e1;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:6px;
      margin-bottom:4px;
    }
  </style>
</head>

<body>
<header>
  <div class="title">üìç ‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£: ‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô / ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£ / ‡∏•‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á‡πÅ‡∏î‡∏á</div>
  <nav>
    <a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
    <a href="map.html" style="color:#fff;">‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</a>
    <a href="population.html">‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£</a>
    <a href="competition.html">‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</a>
    <a href="risk.html">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</a>
  </nav>
</header>

<div id="map-wrapper">
  <div id="map"></div>

  <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏£‡∏∏‡∏õ -->
  <div class="info-panel">
    <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</h2>
    <div>‚Ä¢ ‡∏à‡∏∏‡∏î‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏ß‡∏á‡∏Å‡∏•‡∏°‡πÄ‡∏•‡πá‡∏Å = ‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô / ‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°</div>
    <div>‚Ä¢ ‡∏à‡∏∏‡∏î‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß = ‡∏•‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á‡πÅ‡∏î‡∏á‡πÉ‡∏´‡∏°‡πà (‡∏ê‡∏≤‡∏ô‡πÄ‡∏£‡∏≤)</div>
    <div>‚Ä¢ ‡∏à‡∏∏‡∏î‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á = ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£/‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏´‡∏•‡∏±‡∏Å</div>
    <div style="margin-top:8px;border-top:1px solid #334155;padding-top:8px;">
      <div><b>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå:</b></div>
      <div>- K-means (‡∏Ñ‡∏•‡∏±‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏∏‡∏Å‡∏ï‡∏±‡∏ß)</div>
      <div>- Geometrical interval (‡πÅ‡∏ö‡πà‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô)</div>
    </div>
  </div>

  <!-- Legend -->
  <div class="legend-panel">
    <div class="legend-row">
      <div class="legend-dot" style="background:#22c55e;border-color:#14532d;">RB</div>
      <div>‡∏•‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á‡πÅ‡∏î‡∏á (‡∏à‡∏∏‡∏î‡∏ï‡∏±‡πâ‡∏á)</div>
    </div>
    <div class="legend-row">
      <div class="legend-dot" style="background:#ef4444;border-color:#450a0a;">F</div>
      <div>‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô / ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°</div>
    </div>
    <div class="legend-row">
      <div class="legend-dot" style="background:#eab308;border-color:#78350f;">P</div>
      <div>‡∏ä‡∏∏‡∏°‡∏ä‡∏ô / ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£‡∏´‡∏•‡∏±‡∏Å</div>
    </div>
    <div class="legend-row">
      <div class="legend-dot" style="background:radial-gradient(circle at 30% 30%, rgba(255,0,0,.9), rgba(255,255,0,.0));border-color:#991b1b;"></div>
      <div>Heatmap ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£</div>
    </div>
  </div>
</div>

<footer>
  ¬© ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£ ¬∑ ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡∏à‡∏∏‡∏î‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á / ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á
</footer>

<script>
  // -------------------------------
  // 1) ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà + base layers
  // -------------------------------

  const initialCenter = [13.565126, 100.279895]; // ‡∏•‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á‡πÅ‡∏î‡∏á‡πÉ‡∏´‡∏°‡πà
  const map = L.map('map', {
    center: initialCenter,
    zoom: 11,
    zoomControl: true,
    attributionControl: false
  });

  // ‡∏ñ‡∏ô‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ (OSM)
  const streetLayer = L.tileLayer(
    'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
    { maxZoom: 20 }
  ).addTo(map);

  // ‡∏î‡∏≤‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏° (Esri)
  const satelliteLayer = L.tileLayer(
    'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
    { maxZoom: 20 }
  );

  // ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏Ç‡πâ‡∏° (Carto Dark)
  const darkLayer = L.tileLayer(
    'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',
    {
      maxZoom: 20,
      subdomains: 'abcd'
    }
  );

  // -------------------------------
  // 2) ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° layer group ‡∏ï‡πà‡∏≤‡∏á‡πÜ
  // -------------------------------

  // ‡∏•‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á‡πÅ‡∏î‡∏á (‡∏ê‡∏≤‡∏ô)
  const redBullLayer = L.layerGroup().addTo(map);

  // ‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£ (‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ä‡∏∏‡∏°‡∏ä‡∏ô/‡∏ï‡∏≥‡∏ö‡∏•)
  const populationLayer = L.layerGroup().addTo(map);

  // heatmap ‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£
  let populationHeatLayer = null;

  // ‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏à‡∏≤‡∏Å CSV)
  const mapFactoriesLayer = L.layerGroup().addTo(map);

  // -------------------------------
  // 3) ‡∏õ‡∏±‡∏Å‡∏´‡∏°‡∏∏‡∏î‡∏•‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á‡πÅ‡∏î‡∏á
  // -------------------------------

  const redBullLatLng = [13.565126, 100.279895]; // ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏•‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á‡πÅ‡∏î‡∏á‡πÉ‡∏´‡∏°‡πà ‡∏ñ‡∏ô‡∏ô‡∏™‡∏≤‡∏¢‡πÉ‡∏¢‡∏£‡∏±‡∏Å
  const redBullMarker = L.circleMarker(redBullLatLng, {
    radius: 8,
    color: '#22c55e',
    fillColor: '#22c55e',
    fillOpacity: 0.9,
    weight: 2
  })
  .bindPopup(`
    <div class="popup-title">‡∏•‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á‡πÅ‡∏î‡∏á (‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà)</div>
    <div class="popup-desc">
      ‡∏ñ‡∏ô‡∏ô‡∏™‡∏≤‡∏¢‡πÉ‡∏¢‡∏£‡∏±‡∏Å<br/>
      ${redBullLatLng[0].toFixed(5)}, ${redBullLatLng[1].toFixed(5)}
    </div>
  `)
  .addTo(redBullLayer);

  // -------------------------------
  // 4) ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£‡∏´‡∏•‡∏±‡∏Å (‡∏à‡∏∏‡∏î‡∏ä‡∏∏‡∏°‡∏ä‡∏ô)
  //    ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏≠‡∏á‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï
  // -------------------------------

  const populationData = [
    {
      subdistrict_th: "‡∏°‡∏´‡∏≤‡∏ä‡∏±‡∏¢",
      subdistrict_eng: "Maha Chai",
      people: 38607,
      lat: 13.5497804,
      lng: 100.274131
    },
    {
      subdistrict_th: "‡∏ó‡πà‡∏≤‡∏â‡∏•‡∏≠‡∏°",
      subdistrict_eng: "Tha Chalom",
      people: 7489,
      lat: 13.4919384,
      lng: 100.1871351
    },
    {
      subdistrict_th: "‡∏ö‡∏≤‡∏á‡∏´‡∏ç‡πâ‡∏≤‡πÅ‡∏û‡∏£‡∏Å",
      subdistrict_eng: "Bang Ya Phraek",
      people: 26002,
      lat: 13.5115627,
      lng: 100.2656209
    },
    {
      subdistrict_th: "‡∏û‡∏±‡∏ô‡∏ó‡πâ‡∏≤‡∏¢‡∏ô‡∏£‡∏™‡∏¥‡∏á‡∏´‡πå",
      subdistrict_eng: "Phanthai Norasing",
      people: 43687,
      lat: 13.5777724,
      lng: 100.3656284
    },
    {
      subdistrict_th: "‡∏≠‡πâ‡∏≠‡∏°‡∏ô‡πâ‡∏≠‡∏¢",
      subdistrict_eng: "Om Noi",
      people: 53888,
      lat: 13.7013895,
      lng: 100.3143385
    }
  ];

  // ‡∏ß‡∏≤‡∏á‡∏´‡∏°‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£ + ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° heatmap array
  const heatPoints = []; // [lat, lng, intensity]
  populationData.forEach(item => {
    // intensity = ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£ / 60000 (‡∏õ‡∏£‡∏±‡∏ö scaling ‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ)
    const intensity = item.people / 60000;
    heatPoints.push([item.lat, item.lng, intensity]);

    const popMarker = L.circleMarker([item.lat, item.lng], {
      radius: 6,
      color: '#eab308',
      fillColor: '#eab308',
      fillOpacity: 0.9,
      weight: 2
    })
    .bindPopup(`
      <div class="popup-title">${item.subdistrict_th} (${item.subdistrict_eng})</div>
      <div class="popup-desc">
        <div><b>‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£:</b> ${item.people.toLocaleString()} ‡∏Ñ‡∏ô</div>
        <div><b>‡∏û‡∏¥‡∏Å‡∏±‡∏î:</b> ${item.lat.toFixed(5)}, ${item.lng.toFixed(5)}</div>
      </div>
    `)
    .addTo(populationLayer);
  });

  // ‡∏™‡∏£‡πâ‡∏≤‡∏á heatmap layer ‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£
  populationHeatLayer = L.heatLayer(heatPoints, {
    radius: 40,
    blur: 20,
    maxZoom: 17
  });

  // -------------------------------
  // 5) ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å CSV (factories.csv)
  // -------------------------------

  function parseCSV(text) {
    const lines = text.trim().split("\n");
    const headers = lines[0].split(",").map(h => h.trim());
    const rows = lines.slice(1);

    return rows.map(row => {
      const cols = [];
      let current = '';
      let inQuotes = false;

      for (let i = 0; i < row.length; i++) {
        const char = row[i];
        if (char === '"') {
          inQuotes = !inQuotes;
        } else if (char === ',' && !inQuotes) {
          cols.push(current.trim());
          current = '';
        } else {
          current += char;
        }
      }
      cols.push(current.trim());

      const obj = {};
      headers.forEach((h, i) => {
        obj[h] = cols[i] ?? "";
      });
      return obj;
    });
  }

  fetch('data/factories.csv')
    .then(res => res.text())
    .then(text => {
      const factories = parseCSV(text);

      factories.forEach(f => {
        const lat = parseFloat(f.lat);
        const lng = parseFloat(f.lng);
        if (isNaN(lat) || isNaN(lng)) return;

        const marker = L.circleMarker([lat, lng], {
          radius: 5,
          color: '#ef4444',
          fillColor: '#ef4444',
          fillOpacity: 0.8,
          weight: 1
        }).addTo(mapFactoriesLayer);

        const popupHTML = `
          <div class="popup-title">${f.name || '‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠'}</div>
          <div class="popup-desc">
            <div><b>‡∏´‡∏°‡∏ß‡∏î:</b> ${f.category || '-'}</div>
            <div><b>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</b> ${f.detail || '-'}</div>
            <div><b>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</b> ${f.address || '-'}</div>
            <div><b>‡∏û‡∏¥‡∏Å‡∏±‡∏î:</b> ${lat.toFixed(5)}, ${lng.toFixed(5)}</div>
          </div>
        `;
        marker.bindPopup(popupHTML);
      });
    });

  // -------------------------------
  // 6) ‡πÉ‡∏™‡πà Layer control
  // -------------------------------

  const baseMaps = {
    "‡∏ñ‡∏ô‡∏ô (OSM)": streetLayer,
    "‡∏î‡∏≤‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏°": satelliteLayer,
    "‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î": darkLayer
  };

  const overlayMaps = {
    "‡∏•‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á‡πÅ‡∏î‡∏á": redBullLayer,
    "‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£ (‡∏à‡∏∏‡∏î)": populationLayer,
    "‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£ (Heatmap)": populationHeatLayer,
    "‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î": mapFactoriesLayer
  };

  L.control.layers(baseMaps, overlayMaps, { collapsed:false }).addTo(map);

</script>
</body>
</html>
