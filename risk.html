<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà & ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏ä‡∏∏‡∏°‡∏ä‡∏ô</title>

  <style>
    :root {
      --bg-page: #ffffff;
      --bg-card: #ffffff;
      --bg-card-alt: #f8fafc;
      --border-card: #e2e8f0;
      --text-main: #0f172a;
      --text-dim: #475569;
      --text-muted: #64748b;
      --accent: #2563eb;
      --accent-bg: #eff6ff;
      --radius-card: 12px;

      --chip-bg: #f1f5f9;
      --chip-border: #cbd5e1;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans Thai", sans-serif;
      background: var(--bg-page);
      color: var(--text-main);
      margin: 0;
      padding: 0;
      line-height: 1.5;
    }

    header.topbar {
      background: #0f172a;
      color: #fff;
      padding: 12px 16px;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      font-size: 14px;
    }

    .brand {
      font-weight: 600;
      font-size: 14px;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .brand-emoji {
      font-size: 16px;
    }

    nav.topnav a {
      color: #94a3b8;
      text-decoration: none;
      margin-right: 16px;
      font-size: 13px;
    }
    nav.topnav a:last-child { margin-right: 0; }
    nav.topnav a.active {
      color: #38bdf8;
      font-weight: 600;
    }
    nav.topnav a:hover {
      color: #fff;
    }

    main.page {
      max-width: 1300px;
      margin: 24px auto 64px;
      padding: 0 16px 80px;
    }

    h1.page-title {
      font-size: 20px;
      font-weight: 600;
      color: var(--text-main);
      margin: 0 0 4px;
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      gap: 8px;
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 24px;
      line-height: 1.5;
    }

    /* --- block wrapper --- */
    section.block {
      background: var(--bg-card);
      border: 1px solid var(--border-card);
      border-radius: var(--radius-card);
      padding: 16px 20px 20px;
      margin-bottom: 24px;
    }

    .block-headline {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
      font-size: 16px;
      font-weight: 600;
      color: var(--text-main);
    }

    .block-head-icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: var(--accent-bg);
      border: 1px solid #bfdbfe;
      color: var(--accent);
      font-size: 18px;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      flex-shrink: 0;
    }

    .block-desc {
      font-size: 13px;
      color: var(--text-dim);
      line-height: 1.5;
      margin-bottom: 16px;
    }

    /* --- helper box / hint --- */
    .tips-box {
      background: var(--bg-card-alt);
      border: 1px solid var(--border-card);
      border-radius: var(--radius-card);
      padding: 12px 16px;
      font-size: 13px;
      color: var(--text-main);
      line-height: 1.5;
      margin-bottom: 16px;
    }

    .tips-box ul {
      margin: 8px 0 0;
      padding-left: 20px;
      color: var(--text-main);
    }
    .tips-box li {
      margin-bottom: 4px;
    }

    /* --- input grid --- */
    .grid-inputs {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(min(320px,100%),1fr));
      gap: 16px;
      margin-bottom: 16px;
    }

    .card-input {
      background: var(--bg-card);
      border: 1px solid var(--border-card);
      border-radius: var(--radius-card);
      padding: 16px;
      min-height: 140px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      border-left: 4px solid #93c5fd; /* ‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏µ‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô accent */
    }

    .row-top {
      display: flex;
      flex-wrap: nowrap;
      align-items: flex-start;
      gap: 8px;
      margin-bottom: 8px;
    }

    .icon-box {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      background: var(--accent-bg);
      color: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: 500;
      line-height: 1;
      flex-shrink: 0;
      border: 1px solid #bfdbfe;
    }

    .label-wrap {
      flex: 1;
    }

    .label-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-main);
      line-height: 1.4;
    }

    .label-sub {
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.4;
    }

    .input-wrap input,
    .input-wrap select,
    .input-wrap textarea {
      width: 100%;
      box-sizing: border-box;
      padding: 10px 12px;
      font-size: 14px;
      font-family: inherit;
      color: var(--text-main);
      background: #f8fafc;
      border: 1px solid var(--border-card);
      border-radius: 8px;
      outline: none;
      resize: vertical;
      min-height: 42px;
    }
    .input-wrap textarea {
      min-height: 120px;
      font-size: 13px;
      line-height: 1.4;
    }

    .input-wrap input:focus,
    .input-wrap select:focus,
    .input-wrap textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(37,99,235,.2);
      background: #fff;
    }

    /* --- two-column flex for risk sub-blocks --- */
    .flex-two {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
    }
    .flex-col {
      flex: 1 1 260px;
      min-width: 260px;
    }

    /* --- summary grid --- */
    .summary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(min(260px,100%),1fr));
      gap: 16px;
      margin-top: 8px;
    }

    .summary-card {
      background: #f8fafc;
      border: 1px solid var(--border-card);
      border-radius: var(--radius-card);
      padding: 12px 16px;
      font-size: 14px;
      line-height: 1.4;
      border-left: 4px solid #94a3b8;
    }
    .summary-title {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 4px;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 6px;
    }
    .summary-title .mini-icon {
      font-size: 14px;
    }
    .summary-value {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-main);
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    .summary-note {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 4px;
      line-height: 1.4;
    }

    /* --- risk badges --- */
    .risk-badge {
      font-size: 12px;
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 999px;
      line-height: 1.4;
      border: 1px solid transparent;
      white-space: nowrap;
    }
    .risk-green {
      background:#dcfce7;
      color:#166534;
      border-color:#86efac;
    }
    .risk-yellow {
      background:#fef9c3;
      color:#854d0e;
      border-color:#fde047;
    }
    .risk-orange {
      background:#ffedd5;
      color:#9a3412;
      border-color:#fdba74;
    }
    .risk-red {
      background:#fee2e2;
      color:#991b1b;
      border-color:#fca5a5;
    }

    /* --- flood / terrain box --- */
    .terrain-box {
      background: var(--bg-card-alt);
      border: 1px solid var(--border-card);
      border-radius: var(--radius-card);
      padding: 12px 16px;
      margin-bottom: 16px;
      font-size: 13px;
      color: var(--text-main);
      line-height: 1.5;
      border-left: 4px solid #93c5fd;
    }

    .terrain-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .terrain-left {
      flex: 1 1 220px;
      min-width: 220px;
    }
    .terrain-left .t-label {
      font-weight:600;
      font-size:14px;
      color:var(--text-main);
      margin-bottom:4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .terrain-left .t-desc {
      font-size:12px;
      color:var(--text-muted);
      line-height:1.4;
    }

    .terrain-right {
      flex: 1 1 220px;
      min-width: 220px;
    }
    .terrain-right select {
      width:100%;
      box-sizing:border-box;
      padding:10px 12px;
      font-size:14px;
      font-family:inherit;
      color:var(--text-main);
      background:#fff;
      border:1px solid var(--border-card);
      border-radius:8px;
      outline:none;
    }
    .terrain-right select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(37,99,235,.2);
    }

    /* --- competitor chip list --- */
    .chip-wrap {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      max-height: 140px;
      overflow-y: auto;
      background: #f8fafc;
      border: 1px solid var(--border-card);
      border-radius: 8px;
      padding: 12px;
    }

    .chip {
      background: var(--chip-bg);
      border: 1px solid var(--chip-border);
      color: var(--text-main);
      font-size: 12px;
      line-height: 1.4;
      padding: 4px 8px;
      border-radius: 999px;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .chip .dot {
      width:6px;
      height:6px;
      border-radius:999px;
      background:#ef4444;
      flex-shrink:0;
    }

    /* --- print btn --- */
    .print-row {
      text-align: right;
      margin-top: 12px;
    }
    .print-btn {
      background: #1e293b;
      color: #fff;
      font-size: 13px;
      border: 0;
      border-radius: 8px;
      padding: 10px 14px;
      cursor: pointer;
    }
    .print-btn:hover {
      background: #0f172a;
    }

    footer.page-footer {
      text-align: center;
      font-size: 12px;
      color: #94a3b8;
      padding: 24px 16px 48px;
    }

    @media print {
      header.topbar, .print-row {
        display: none;
      }
      body {
        background: #fff;
        color: #000;
      }
      section.block {
        page-break-inside: avoid;
      }
    }
  </style>
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <span class="brand-emoji">üìä</span>
      <span>‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£ ¬∑ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà & ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏ä‡∏∏‡∏°‡∏ä‡∏ô</span>
    </div>
    <nav class="topnav">
      <a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
      <a href="map.html">‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</a>
      <a href="competition.html">‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á & ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</a>
      <a href="population.html">‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£</a>
      <a href="capacity.html">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï</a>
      <a href="risk.html" class="active">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</a>
    </nav>
  </header>

  <main class="page">
    <h1 class="page-title">
      ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏£‡∏≠‡∏ö‡πÑ‡∏ã‡∏ï‡πå (‡∏ä‡∏∏‡∏°‡∏ä‡∏ô / ‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏° / ‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô)
    </h1>
    <div class="subtitle">
      ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ô‡∏µ‡πâ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°: ‚Äú‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏¢‡∏≤‡∏ß‡πÑ‡∏´‡∏°?‚Äù  
      ‡πÄ‡∏£‡∏≤‡∏°‡∏≠‡∏á 4 ‡∏î‡πâ‡∏≤‡∏ô: ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏ä‡∏∏‡∏°‡∏ä‡∏ô, ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô, ‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°/‡∏†‡∏π‡∏°‡∏¥‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏• (‡∏Ñ‡∏ô‡πÅ‡∏¢‡πà‡∏á‡∏Ç‡∏≠‡∏á + ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏î‡∏î‡∏±‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà)
    </div>

    <!-- SECTION 1 : INPUT FACTORS -->
    <section class="block">
      <div class="block-headline">
        <div class="block-head-icon">‚öôÔ∏è</div>
        <div>1) ‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏£‡∏≠‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà (‡πÉ‡∏™‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏Ç‡∏≠‡∏á‡πÑ‡∏ã‡∏ï‡πå‡∏Ñ‡∏∏‡∏ì)</div>
      </div>
      <div class="block-desc">
        ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á + ‡∏™‡∏µ‡πÑ‡∏ü‡∏à‡∏£‡∏≤‡∏à‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
      </div>

      <div class="grid-inputs">
        <!-- community distance -->
        <div class="card-input">
          <div class="row-top">
            <div class="icon-box">üè†</div>
            <div class="label-wrap">
              <div class="label-title">‡∏£‡∏∞‡∏¢‡∏∞‡∏ñ‡∏∂‡∏á‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div>
              <div class="label-sub">‡πÄ‡∏°‡∏ï‡∏£ (‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏à‡∏±‡∏î‡∏™‡∏£‡∏£ / ‡∏´‡∏≠‡∏û‡∏±‡∏Å‡∏Ñ‡∏ô‡∏á‡∏≤‡∏ô / ‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏£‡∏¥‡∏°‡∏ô‡πâ‡∏≥)</div>
            </div>
          </div>
          <div class="input-wrap">
            <input type="number" id="distToCommunity" value="300" min="0" step="10" />
          </div>
        </div>

        <!-- how many communities -->
        <div class="card-input">
          <div class="row-top">
            <div class="icon-box">üë•</div>
            <div class="label-wrap">
              <div class="label-title">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô‡πÉ‡∏ô‡∏£‡∏±‡∏®‡∏°‡∏µ 1 ‡∏Å‡∏°.</div>
              <div class="label-sub">‡∏Å‡∏•‡∏∏‡πà‡∏°/‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô/‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
            </div>
          </div>
          <div class="input-wrap">
            <input type="number" id="communityCount" value="2" min="0" step="1" />
          </div>
        </div>

        <!-- complaint -->
        <div class="card-input">
          <div class="row-top">
            <div class="icon-box">üì¢</div>
            <div class="label-wrap">
              <div class="label-title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</div>
              <div class="label-sub">‡∏Å‡∏•‡∏¥‡πà‡∏ô / ‡∏ù‡∏∏‡πà‡∏ô / ‡∏ô‡πâ‡∏≥‡πÄ‡∏™‡∏µ‡∏¢ / ‡∏£‡∏ñ‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á / ‡πÑ‡∏•‡∏ü‡πå‡∏™‡∏î‡∏î‡∏£‡∏≤‡∏°‡πà‡∏≤</div>
            </div>
          </div>
          <div class="input-wrap">
            <select id="complaintLevel">
              <option value="low">‡∏ï‡πà‡∏≥ (‡πÄ‡∏á‡∏µ‡∏¢‡∏ö ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏î‡∏£‡∏≤‡∏°‡πà‡∏≤)</option>
              <option value="mid" selected>‡∏Å‡∏•‡∏≤‡∏á (‡∏°‡∏µ‡∏ö‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÜ)</option>
              <option value="high">‡∏™‡∏π‡∏á (‡∏°‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡πà‡∏≠‡∏¢ / ‡∏•‡∏á‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•‡∏ö‡πà‡∏≠‡∏¢)</option>
            </select>
          </div>
        </div>

        <!-- competitor count live from list -->
        <div class="card-input">
          <div class="row-top">
            <div class="icon-box">üè≠</div>
            <div class="label-wrap">
              <div class="label-title">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏£‡∏≠‡∏ö‡πÑ‡∏ã‡∏ï‡πå (~3 ‡∏Å‡∏°.)</div>
              <div class="label-sub">
                ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ô‡∏±‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (‡πÅ‡∏ï‡πà‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏Å‡πâ‡∏°‡∏∑‡∏≠‡πÑ‡∏î‡πâ)
              </div>
            </div>
          </div>
          <div class="input-wrap">
            <input type="number" id="competitorCount" value="20" min="0" step="1" />
          </div>
        </div>
      </div>

      <!-- quick summary after inputs -->
      <div class="summary-grid">
        <div class="summary-card">
          <div class="summary-title"><span class="mini-icon">üè†</span>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ä‡∏∏‡∏°‡∏ä‡∏ô / ‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
          <div class="summary-value">
            <span id="communityRiskText">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span>
            <span id="communityRiskBadge" class="risk-badge risk-yellow">üü° ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span>
          </div>
          <div class="summary-note">
            ‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞ = ‡πÇ‡∏î‡∏ô‡∏ñ‡πà‡∏≤‡∏¢‡∏Ñ‡∏•‡∏¥‡∏õ‡∏á‡πà‡∏≤‡∏¢ / ‡∏ü‡πâ‡∏≠‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ / ‡∏Ç‡πà‡∏≤‡∏ß‡πÑ‡∏ß
          </div>
        </div>

        <div class="summary-card">
          <div class="summary-title"><span class="mini-icon">üè≠</span>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ä‡∏¥‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</div>
          <div class="summary-value">
            <span id="competitionRiskText">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô</span>
            <span id="competitionRiskBadge" class="risk-badge risk-orange">üü† ‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô</span>
          </div>
          <div class="summary-note">
            ‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡πÄ‡∏¢‡∏≠‡∏∞ = ‡πÅ‡∏¢‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏î‡∏∏ / ‡∏£‡∏ñ‡∏ß‡∏¥‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô / ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏≠‡∏á
          </div>
        </div>

        <div class="summary-card">
          <div class="summary-title"><span class="mini-icon">üöö</span>‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà (‡∏£‡∏ñ‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å / ‡πÄ‡∏™‡∏µ‡∏¢‡∏á / ‡∏ù‡∏∏‡πà‡∏ô)</div>
          <div class="summary-value">
            <span id="impactRiskText">‡∏Ñ‡∏ß‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</span>
            <span id="impactRiskBadge" class="risk-badge risk-orange">üü† ‡∏Ñ‡∏ß‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</span>
          </div>
          <div class="summary-note">
            ‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏ß‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏ñ‡∏Ç‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤-‡∏≠‡∏≠‡∏Å‡∏ñ‡∏µ‡πà ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô ‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏û‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå ‚Äú‡∏Å‡∏≠‡∏á‡∏Ç‡∏¢‡∏∞‚Äù
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 2 : FLOOD / TERRAIN -->
    <section class="block">
      <div class="block-headline">
        <div class="block-head-icon">üåßÔ∏è</div>
        <div>2) ‡∏†‡∏π‡∏°‡∏¥‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÅ‡∏•‡∏∞‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°</div>
      </div>
      <div class="block-desc">
        ‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏•‡∏±‡∏ß? ‡∏ô‡πâ‡∏≥‡∏ù‡∏ô‡∏Ç‡∏±‡∏á vs ‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏•‡∏´‡∏ô‡∏∏‡∏ô vs ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°
      </div>

      <div class="terrain-box">
        <div class="terrain-row">
          <div class="terrain-left">
            <div class="t-label">
              <span>‡∏†‡∏π‡∏°‡∏¥‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÑ‡∏ã‡∏ï‡πå</span>
            </div>
            <div class="t-desc">
              ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ
            </div>
          </div>
          <div class="terrain-right">
            <select id="terrainType">
              <option value="highfill">
                ‡∏ñ‡∏°‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏ñ‡∏ô‡∏ô + ‡∏°‡∏µ‡∏ó‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ï‡∏£‡∏á (‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ô‡πâ‡∏≥‡∏Ç‡∏±‡∏á‡∏ï‡πà‡∏≥)
              </option>
              <option value="industrialfill" selected>
                ‡∏•‡∏≤‡∏ô‡∏ñ‡∏°‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏° (‡∏ô‡πâ‡∏≥‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏â‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏Ç‡∏±‡∏á‡∏ô‡∏≤‡∏ô‡∏ñ‡πâ‡∏≤‡∏ù‡∏ô‡∏´‡∏ô‡∏±‡∏Å)
              </option>
              <option value="canal">
                ‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏•‡∏≠‡∏á/‡∏ó‡∏µ‡πà‡∏•‡∏∏‡πà‡∏°‡∏ä‡∏∏‡∏°‡∏ä‡∏ô (‡∏ù‡∏ô‡∏´‡∏ô‡∏±‡∏Å = ‡πÄ‡∏≠‡πà‡∏≠‡∏ó‡πà‡∏ß‡∏°‡πÄ‡∏£‡πá‡∏ß)
              </option>
              <option value="riverlow">
                ‡πÅ‡∏ô‡∏ß‡∏õ‡∏≤‡∏Å‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥/‡∏ô‡πâ‡∏≥‡πÄ‡∏Ñ‡πá‡∏°‡∏´‡∏ô‡∏∏‡∏ô (‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏•‡∏î‡∏±‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á)
              </option>
            </select>
          </div>
        </div>

        <div class="terrain-row">
          <div class="terrain-left">
            <div class="t-label">‡∏Å‡∏≤‡∏£‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°</div>
            <div class="t-desc" id="terrainExplain">
              ‡∏î‡∏¥‡∏ô‡∏ñ‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏•‡∏≤‡∏ô‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏° ‚Üí ‡∏ô‡πâ‡∏≥‡πÑ‡∏°‡πà‡∏ó‡∏∞‡∏•‡∏±‡∏Å‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏ö‡∏ö‡∏ô‡πâ‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏ù‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡∏°‡∏≤‡∏Å‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏Ç‡∏±‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏≤‡∏¢ / ‡∏ö‡πà‡∏≠‡∏û‡∏±‡∏Å‡∏ô‡πâ‡∏≥‡πÄ‡∏≠‡∏á
            </div>
          </div>
          <div class="terrain-right">
            <div class="t-label">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°</div>
            <div class="summary-value" style="font-size:16px;">
              <span id="floodRiskText">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span>
              <span id="floodRiskBadge" class="risk-badge risk-yellow">üü° ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span>
            </div>
            <div class="summary-note">
              ‡πÅ‡∏ô‡∏ß‡∏•‡∏î‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á: ‡∏¢‡∏Å‡πÇ‡∏ã‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ (‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡∏î‡∏µ / ‡∏Å‡πâ‡∏≠‡∏ô‡∏≠‡∏±‡∏î) ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏ñ‡∏ô‡∏ô
              + ‡∏õ‡∏±‡πä‡∏°‡∏ô‡πâ‡∏≥ + ‡∏£‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ñ‡∏≤‡∏ß‡∏£
            </div>
          </div>
        </div>
      </div>

      <div class="summary-grid">
        <div class="summary-card">
          <div class="summary-title"><span class="mini-icon">üìù</span>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏ß‡πâ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà / ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</div>
          <div class="summary-value" style="font-size:14px;font-weight:500;">
            <span id="floodNote">
              ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏≤‡∏ô‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏ñ‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏¥‡∏°‡∏ô‡πâ‡∏≥‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
              ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏Ñ‡∏∑‡∏≠‡∏ù‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡πâ‡∏≥‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ä‡πâ‡∏≤ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏•‡∏´‡∏ô‡∏∏‡∏ô
            </span>
          </div>
          <div class="summary-note">
            ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡πÅ‡∏ô‡∏ö‡πÉ‡∏ô memo / ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ä‡∏µ‡πâ‡πÅ‡∏à‡∏á
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 3 : COMPETITOR LIST -->
    <section class="block">
      <div class="block-headline">
        <div class="block-head-icon">üìç</div>
        <div>3) ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏£‡∏≠‡∏ö‡πÑ‡∏ã‡∏ï‡πå (~3 ‡∏Å‡∏°.)</div>
      </div>
      <div class="block-desc">
        ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏° ‚Äú‡∏•‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤ / ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏• / ‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏®‡∏©‚Äù ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏∞‡πÅ‡∏ß‡∏Å‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô  
        ‡∏¢‡∏¥‡πà‡∏á‡πÅ‡∏ô‡πà‡∏ô = ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏Å‡∏±‡∏ô‡∏î‡∏∏, ‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤-‡∏≠‡∏≠‡∏Å‡∏ñ‡∏µ‡πà, ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏ö‡∏ï‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏•‡∏¥‡πà‡∏ô/‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏á‡πà‡∏≤‡∏¢
      </div>

      <div class="flex-two">
        <div class="flex-col">
          <div class="label-title" style="font-size:13px;margin-bottom:6px;display:flex;align-items:center;gap:6px;">
            <span style="font-size:16px;">üìù</span>
            ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á (1 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î = 1 ‡∏£‡∏≤‡∏¢)
          </div>
          <div class="input-wrap">
            <textarea id="competitorListArea">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ä‡πà‡∏ß‡∏ô‡∏¢‡∏µ‡πà ‡∏≠‡∏¥‡∏ô‡∏î‡∏±‡∏™‡∏ó‡∏£‡∏µ ‡∏à‡∏≥‡∏Å‡∏±‡∏î
‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏õ‡∏£‡∏∞‡πÄ‡∏™‡∏£‡∏¥‡∏ê‡∏™‡∏∏‡∏Ç ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏• ‡∏à‡∏≥‡∏Å‡∏±‡∏î
‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏°‡∏ì‡∏µ‡∏™‡∏¢‡∏≤‡∏° ‡πÄ‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå ‡∏à‡∏≥‡∏Å‡∏±‡∏î
‡∏ö‡∏à‡∏Å ‡∏¢‡∏á‡πÄ‡∏Æ‡∏á ‡∏°‡∏´‡∏≤‡∏ä‡∏±‡∏¢ ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡πâ‡∏•
‡∏á‡πà‡∏ß‡∏ô‡πÄ‡∏ã‡πâ‡∏á
‡∏£‡πâ‡∏≤‡∏ô‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏†‡∏≤ ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•
‡∏û‡∏¥‡∏£‡∏±‡∏ä ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•
‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏ô‡∏≠‡∏°
‡πÄ‡∏à‡∏ï‡∏ô‡∏≤‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤
‡∏£‡πâ‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤ ‡πÄ‡∏à‡πâ‡πÄ‡∏°‡∏¢‡πå
‡πÇ‡∏Ñ‡∏Å‡∏Ç‡∏≤‡∏°‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•
‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏£‡∏≤‡∏ä‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</textarea>
          </div>
          <div class="summary-note" style="margin-top:6px;">
            ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ‚Äú‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ä‡∏¥‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‚Äù ‡πÅ‡∏•‡∏∞ ‚Äú‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‚Äù
          </div>
        </div>

        <div class="flex-col">
          <div class="label-title" style="font-size:13px;margin-bottom:6px;display:flex;align-items:center;gap:6px;">
            <span style="font-size:16px;">üëÄ</span>
            ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ö‡∏ö‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
          </div>

          <div class="chip-wrap" id="competitorChips">
            <!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏° chip ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ -->
          </div>

          <div class="summary-note" style="margin-top:6px;">
            ‡∏ñ‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‚Äú‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á / ‡πÄ‡∏ú‡∏≤ / ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÅ‡∏£‡∏á‚Äù ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏à‡πâ‡∏≤
            ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏†‡∏≤‡∏û‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏à‡∏∞‡∏û‡∏∏‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏™‡πâ‡∏°/‡πÅ‡∏î‡∏á‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 4 : OVERALL SCORE -->
    <section class="block">
      <div class="block-headline">
        <div class="block-head-icon">üö¶</div>
        <div>4) ‡πÑ‡∏ü‡∏à‡∏£‡∏≤‡∏à‡∏£‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏≠‡∏î‡πÄ‡∏ä‡∏¥‡∏á‡∏ä‡∏∏‡∏°‡∏ä‡∏ô/‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢)</div>
      </div>

      <div class="block-desc">
        ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° ‚Äú‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÇ‡∏î‡∏ô‡∏ï‡πà‡∏≠‡∏ï‡πâ‡∏≤‡∏ô/‡πÇ‡∏î‡∏ô‡∏õ‡∏¥‡∏î‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏Ñ‡∏∏‡∏¢‡πÄ‡∏ä‡∏¥‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£
      </div>

      <div class="summary-grid">
        <div class="summary-card" style="border-left-color:#f87171;">
          <div class="summary-title">
            <span class="mini-icon">üî•</span>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á
          </div>
          <div class="summary-value">
            <span id="totalRiskScore">2.8 / 4.0</span>
            <span id="overallRiskBadge" class="risk-badge risk-orange">üü† ‡∏Ñ‡∏ß‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</span>
          </div>
          <div class="summary-note">
            ‡∏™‡∏π‡∏ï‡∏£‡∏ñ‡πà‡∏ß‡∏á‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å:
            <br/>35% ‡∏£‡∏∞‡∏¢‡∏∞+‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô
            <br/>25% ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
            <br/>25% ‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°/‡∏†‡∏π‡∏°‡∏¥‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®
            <br/>15% ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•
          </div>
        </div>

        <div class="summary-card" style="border-left-color:#60a5fa;">
          <div class="summary-title">
            <span class="mini-icon">üí°</span>‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ä‡∏¥‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå
          </div>
          <div class="summary-value" style="font-size:14px;font-weight:500;">
            <span id="overallNarrative">
              ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ ‚Äú‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏†‡∏≤‡∏û‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‚Äù
              ‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏´‡πá‡∏ô/‡∏à‡∏±‡∏ö‡∏ï‡∏≤ ‡πÅ‡∏•‡∏∞‡∏£‡∏ñ‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å‡∏≠‡∏≤‡∏à‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏ö‡∏Å‡∏ß‡∏ô
              ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÇ‡∏ã‡∏ô‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°‡∏â‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
            </span>
          </div>
          <div class="summary-note">
            ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á: ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏£‡∏ñ‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô, ‡∏Å‡∏±‡πâ‡∏ô‡∏ù‡∏∏‡πà‡∏ô/‡πÄ‡∏™‡∏µ‡∏¢‡∏á, ‡πÇ‡∏ä‡∏ß‡πå‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Å‡∏≠‡∏á‡∏Ç‡∏¢‡∏∞‡πÄ‡∏•‡∏≠‡∏∞‡πÄ‡∏ó‡∏≠‡∏∞
          </div>
        </div>
      </div>

      <div class="print-row">
        <button class="print-btn" onclick="window.print()">‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô / ‡πÅ‡∏ô‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£</button>
      </div>
    </section>

    <footer class="page-footer">
      ¬© Prototype ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà ¬∑ ‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£
    </footer>
  </main>

  <script>
    // ---------------------------------------
    // DOM refs
    // ---------------------------------------
    const distToCommunityEl   = document.getElementById('distToCommunity');
    const communityCountEl    = document.getElementById('communityCount');
    const complaintLevelEl    = document.getElementById('complaintLevel');
    const competitorCountEl   = document.getElementById('competitorCount');
    const terrainTypeEl       = document.getElementById('terrainType');

    const competitorListAreaEl = document.getElementById('competitorListArea');
    const competitorChipsEl    = document.getElementById('competitorChips');

    // outputs
    const communityRiskTextEl     = document.getElementById('communityRiskText');
    const communityRiskBadgeEl    = document.getElementById('communityRiskBadge');
    const competitionRiskTextEl   = document.getElementById('competitionRiskText');
    const competitionRiskBadgeEl  = document.getElementById('competitionRiskBadge');
    const impactRiskTextEl        = document.getElementById('impactRiskText');
    const impactRiskBadgeEl       = document.getElementById('impactRiskBadge');
    const floodRiskTextEl         = document.getElementById('floodRiskText');
    const floodRiskBadgeEl        = document.getElementById('floodRiskBadge');
    const terrainExplainEl        = document.getElementById('terrainExplain');
    const floodNoteEl             = document.getElementById('floodNote');

    const totalRiskScoreEl        = document.getElementById('totalRiskScore');
    const overallRiskBadgeEl      = document.getElementById('overallRiskBadge');
    const overallNarrativeEl      = document.getElementById('overallNarrative');

    // ---------------------------------------
    // Utils
    // ---------------------------------------
    function riskClassAndLabel(score){
      // score ~1 = ‡∏î‡∏µ (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß) ... ~4 = ‡πÅ‡∏î‡∏á
      if(score < 1.75){
        return {cls:'risk-green', label:'üü¢ ‡∏ï‡πà‡∏≥'};
      } else if(score < 2.5){
        return {cls:'risk-yellow', label:'üü° ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á'};
      } else if(score < 3.25){
        return {cls:'risk-orange', label:'üü† ‡∏Ñ‡∏ß‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°'};
      } else {
        return {cls:'risk-red', label:'üî¥ ‡∏™‡∏π‡∏á'};
      }
    }

    // ---------------------------------------
    // 1) ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ä‡∏∏‡∏°‡∏ä‡∏ô / ‡∏£‡∏∞‡∏¢‡∏∞
    // ---------------------------------------
    function calcCommunityScore(distMeters, communityCount){
      // ‡∏£‡∏∞‡∏¢‡∏∞: ‡πÉ‡∏Å‡∏•‡πâ‡∏°‡∏≤‡∏Å = ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏π‡∏á
      // <200m =>4, 200-500=>3, 500-1000=>2, >1000=>1
      let base;
      if(distMeters < 200) base = 4;
      else if(distMeters < 500) base = 3;
      else if(distMeters < 1000) base = 2;
      else base = 1;

      // ‡∏ñ‡πâ‡∏≤ communityCount >=4 ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏≠‡∏ö‡πÜ‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞‡∏°‡∏≤‡∏Å => ‡∏ö‡∏ß‡∏Å 0.5
      if(communityCount >= 4) base += 0.5;
      if(base > 4) base = 4;
      return base;
    }

    // ---------------------------------------
    // 2) ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
    // ---------------------------------------
    function calcComplaintScore(level){
      // low=1, mid=3, high=4
      if(level === 'low') return 1;
      if(level === 'mid') return 3;
      return 4; // high
    }

    // ---------------------------------------
    // 3) Flood / Terrain
    // ---------------------------------------
    function calcFloodScoreAndText(terrainVal){
      // ‡∏Ñ‡∏∑‡∏ô {score, explain, floodText, note}
      if(terrainVal === 'highfill'){
        return {
          score: 1.2,
          explain: "‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏Å‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏ñ‡∏ô‡∏ô‡∏´‡∏•‡∏±‡∏Å + ‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏ï‡∏£‡∏á ‚Üí ‡∏ô‡πâ‡∏≥‡∏ù‡∏ô‡∏ó‡πà‡∏ß‡∏°‡πÅ‡∏≠‡πà‡∏á‡∏¢‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡πÄ‡∏£‡πá‡∏ß",
          floodText: "‡∏ï‡πà‡∏≥",
          note: "‡∏à‡∏∏‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ñ‡∏ô‡∏ô‡∏£‡∏≠‡∏ö ‡πÜ ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡πÑ‡∏î‡πâ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏ô‡∏ß‡∏£‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏∏‡∏ô‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á"
        };
      }
      if(terrainVal === 'industrialfill'){
        return {
          score: 2.5,
          explain: "‡∏î‡∏¥‡∏ô‡∏ñ‡∏°‡∏•‡∏≤‡∏ô‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏° ‚Üí ‡∏ô‡πâ‡∏≥‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏â‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏ù‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡∏≠‡∏≤‡∏à‡∏Ç‡∏±‡∏á‡∏ô‡∏≤‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏õ‡∏±‡πä‡∏°‡∏ô‡πâ‡∏≥/‡∏£‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏≤‡∏¢",
          floodText: "‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á",
          note: "‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏°‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏° ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏¥‡∏î‡∏ô‡πâ‡∏≥‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏Ñ‡∏∑‡∏≠‡∏ù‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ä‡πâ‡∏≤"
        };
      }
      if(terrainVal === 'canal'){
        return {
          score: 3.2,
          explain: "‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏∏‡πà‡∏°/‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏•‡∏≠‡∏á ‚Üí ‡∏ù‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏≠‡πà‡∏≠ ‡∏ó‡πà‡∏ß‡∏°‡πÄ‡∏£‡πá‡∏ß",
          floodText: "‡∏Ñ‡∏ß‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°",
          note: "‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏•‡∏≠‡∏á‡∏ä‡∏∏‡∏°‡∏ä‡∏ô ‡∏ô‡πâ‡∏≥‡∏ù‡∏ô‡πÄ‡∏≠‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏±‡∏ô‡∏î‡∏¥‡∏ô/‡∏õ‡∏±‡πä‡∏°‡∏ô‡πâ‡∏≥"
        };
      }
      // riverlow
      return {
        score: 3.8,
        explain: "‡πÇ‡∏ã‡∏ô‡∏õ‡∏≤‡∏Å‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥/‡∏ô‡πâ‡∏≥‡πÄ‡∏Ñ‡πá‡∏°‡∏´‡∏ô‡∏∏‡∏ô ‚Üí ‡∏ô‡πâ‡∏≥‡∏î‡∏±‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏•‡πà‡∏≤‡∏á ‡∏â‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏ô",
        floodText: "‡∏™‡∏π‡∏á",
        note: "‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏ô‡∏ß‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏∏‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏•‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏±‡πâ‡∏ô‡∏õ‡∏ô‡πÄ‡∏õ‡∏∑‡πâ‡∏≠‡∏ô‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å"
      };
    }

    // ---------------------------------------
    // 4) ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•
    // ---------------------------------------
    function calcCompetitorScore(cnt){
      // <=10 =>1.5, <=30 =>2.5, >30 =>3.5
      if(cnt <= 10) return 1.5;
      if(cnt <= 30) return 2.5;
      return 3.5;
    }

    // ---------------------------------------
    // 5) ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà (‡∏£‡∏ñ, ‡πÄ‡∏™‡∏µ‡∏¢‡∏á, ‡∏ù‡∏∏‡πà‡∏ô)
    //    ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö: competitorScore + complaintScore
    //    ‡∏™‡∏°‡∏°‡∏ï‡∏¥: impact = avg(complaintScore, competitorScore)
    // ---------------------------------------
    function calcImpactScore(complaintScore, competitorScore){
      return (complaintScore + competitorScore)/2;
    }

    // ---------------------------------------
    // Competitor list -> chips + auto-count
    // ---------------------------------------
    function updateCompetitorListStuff(){
      // ‡πÅ‡∏ï‡∏Å‡∏ï‡∏≤‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏±‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏ß‡πà‡∏≤‡∏á
      const raw = competitorListAreaEl.value || "";
      const names = raw
        .split("\n")
        .map(t => t.trim())
        .filter(t => t.length>0);

      // render chip
      competitorChipsEl.innerHTML = "";
      names.forEach(n => {
        const div = document.createElement("div");
        div.className = "chip";
        div.innerHTML = `<span class="dot"></span><span>${n}</span>`;
        competitorChipsEl.appendChild(div);
      });

      // sync count -> competitorCount input
      competitorCountEl.value = names.length.toString();
    }

    // ---------------------------------------
    // Recalc all + update UI badges/text
    // ---------------------------------------
    function recalc(){
      // sync list first
      updateCompetitorListStuff();

      const distMeters = parseFloat(distToCommunityEl.value) || 0;
      const commCount = parseFloat(communityCountEl.value) || 0;
      const complaints = complaintLevelEl.value;
      const competitors = parseFloat(competitorCountEl.value) || 0;
      const terrainVal = terrainTypeEl.value;

      const communityScore  = calcCommunityScore(distMeters, commCount);
      const complaintScore  = calcComplaintScore(complaints);
      const floodInfo       = calcFloodScoreAndText(terrainVal);
      const competitorScore = calcCompetitorScore(competitors);
      const impactScore     = calcImpactScore(complaintScore, competitorScore);

      // --- Community Risk text/badge
      let commRiskWord;
      if(communityScore < 1.75) commRiskWord = "‡∏ï‡πà‡∏≥";
      else if(communityScore < 2.5) commRiskWord = "‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á";
      else if(communityScore < 3.25) commRiskWord = "‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏™‡∏π‡∏á";
      else commRiskWord = "‡∏™‡∏π‡∏á";

      communityRiskTextEl.textContent = commRiskWord;
      const commBadge = riskClassAndLabel(communityScore);
      communityRiskBadgeEl.textContent = commBadge.label;
      communityRiskBadgeEl.className = "risk-badge " + commBadge.cls;

      // --- Competition Risk (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ä‡∏¥‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô)
      let compWord;
      if(competitorScore < 1.75) compWord = "‡∏ö‡∏≤‡∏á‡πÄ‡∏ö‡∏≤";
      else if(competitorScore < 2.5) compWord = "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô";
      else if(competitorScore < 3.25) compWord = "‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô";
      else compWord = "‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô‡∏°‡∏≤‡∏Å";

      competitionRiskTextEl.textContent = compWord;
      const compBadge = riskClassAndLabel(competitorScore);
      competitionRiskBadgeEl.textContent = compBadge.label;
      competitionRiskBadgeEl.className = "risk-badge " + compBadge.cls;

      // --- Impact Risk (‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≤‡∏Å‡∏£‡∏ñ/‡πÄ‡∏™‡∏µ‡∏¢‡∏á/‡∏ù‡∏∏‡πà‡∏ô)
      let impactWord;
      if(impactScore < 1.75) impactWord = "‡∏ï‡πà‡∏≥";
      else if(impactScore < 2.5) impactWord = "‡∏û‡∏≠‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ";
      else if(impactScore < 3.25) impactWord = "‡∏Ñ‡∏ß‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°";
      else impactWord = "‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÇ‡∏î‡∏ô‡∏î‡∏£‡∏≤‡∏°‡πà‡∏≤";

      impactRiskTextEl.textContent = impactWord;
      const impactBadge = riskClassAndLabel(impactScore);
      impactRiskBadgeEl.textContent = impactBadge.label;
      impactRiskBadgeEl.className = "risk-badge " + impactBadge.cls;

      // --- Flood / Terrain
      floodRiskTextEl.textContent = floodInfo.floodText;
      terrainExplainEl.textContent = floodInfo.explain;
      floodNoteEl.textContent = floodInfo.note;
      const floodBadge = riskClassAndLabel(floodInfo.score);
      floodRiskBadgeEl.textContent = floodBadge.label;
      floodRiskBadgeEl.className = "risk-badge " + floodBadge.cls;

      // --- ‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ñ‡πà‡∏ß‡∏á‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡πÑ‡∏ü‡∏à‡∏£‡∏≤‡∏à‡∏£‡πÉ‡∏´‡∏ç‡πà)
      // totalScore = 0.35*community + 0.25*complaints + 0.25*flood + 0.15*competitor
      const totalScore =
        0.35*communityScore +
        0.25*complaintScore +
        0.25*floodInfo.score +
        0.15*competitorScore;

      totalRiskScoreEl.textContent = totalScore.toFixed(1) + " / 4.0";

      const overallBadge = riskClassAndLabel(totalScore);
      overallRiskBadgeEl.textContent = overallBadge.label;
      overallRiskBadgeEl.className = "risk-badge " + overallBadge.cls;

      // Narrative ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£
      let narrative;
      if(totalScore < 1.75){
        narrative = "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≥‡πÄ‡∏ä‡∏¥‡∏á‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏±‡πâ‡∏á‡∏•‡∏≤‡∏ô‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏° (‡∏ñ‡πâ‡∏≤‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô)";
      } else if(totalScore < 2.5){
        narrative = "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á ‡∏¢‡∏±‡∏á‡∏û‡∏≠‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏ñ ‡∏ù‡∏∏‡πà‡∏ô ‡∏ô‡πâ‡∏≥‡∏ó‡∏¥‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏î‡∏µ ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏≠‡∏¢‡∏π‡πà‡∏¢‡∏≤‡∏ß‡πÅ‡∏•‡∏∞‡∏Ç‡∏¢‡∏≤‡∏¢‡∏™‡πÄ‡∏Å‡∏•‡πÑ‡∏î‡πâ";
      } else if(totalScore < 3.25){
        narrative = "‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ ‚Äú‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏†‡∏≤‡∏û‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‚Äù ‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡∏ï‡∏≤ ‡∏£‡∏ñ‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏≠‡∏≠‡∏Å‡∏ñ‡∏µ‡πà ‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡πÄ‡∏ä‡∏¥‡∏á‡∏£‡∏∏‡∏Å";
      } else {
        narrative = "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á: ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å (‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‡∏Å‡∏•‡∏¥‡πà‡∏ô ‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏° ‡∏ô‡πâ‡∏≥‡πÄ‡∏™‡∏µ‡∏¢) ‡πÅ‡∏•‡∏∞‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢‡πÄ‡∏ä‡∏¥‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô";
      }
      overallNarrativeEl.textContent = narrative;
    }

    // ---------------------------------------
    // event binding
    // ---------------------------------------
    [
      distToCommunityEl,
      communityCountEl,
      complaintLevelEl,
      competitorCountEl,
      terrainTypeEl,
      competitorListAreaEl
    ].forEach(el => {
      el.addEventListener('input', recalc);
      el.addEventListener('change', recalc);
    });

    // ---------------------------------------
    // init
    // ---------------------------------------
    recalc();
  </script>
</body>
</html>
