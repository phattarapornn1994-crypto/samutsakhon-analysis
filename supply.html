<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ | ‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£</title>

  <style>
    :root {
      --bg-dark-900:#0f172a;
      --bg-dark-800:#1e293b;
      --bg-dark-700:#334155;
      --bg-dark-600:#475569;
      --text-dim:#94a3b8;
      --text-soft:#cbd5e1;
      --text-bright:#fff;
      --accent:#38bdf8;
      --card-bg:rgba(15,23,42,.8);
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      background: var(--bg-dark-900);
      color: var(--text-bright);
      margin: 0;
      display: grid;
      grid-template-rows: auto 1fr auto;
      min-height: 100vh;
    }

    header {
      background: var(--bg-dark-900);
      border-bottom: 1px solid var(--bg-dark-700);
      padding: 12px 16px;
      font-size: 14px;

      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .brand {
      font-weight: 600;
      font-size: 14px;
      color: var(--text-bright);
    }

    nav a {
      color: var(--text-dim);
      margin-left: 16px;
      text-decoration: none;
      font-size: 13px;
    }
    nav a:hover {
      color: var(--text-bright);
    }
    nav a.active {
      color: var(--accent);
      font-weight: 600;
    }

    main {
      padding: 16px;
      color: var(--text-soft);
      display: grid;
      gap: 16px;
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
    }

    section.card {
      background: var(--card-bg);
      border: 1px solid var(--bg-dark-700);
      border-radius: 16px;
      box-shadow:0 24px 60px rgb(0 0 0 / .8);
      padding: 16px 20px;
    }

    section.card h2 {
      margin: 0 0 8px 0;
      font-size: 15px;
      font-weight: 600;
      color: var(--text-bright);
      display:flex;
      align-items:center;
      gap:8px;
    }

    section.card .sub {
      font-size: 12px;
      line-height: 1.5;
      color: var(--text-dim);
      margin-bottom: 12px;
    }

    .flex-wrap {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
    }

    .metric-box {
      flex: 1 1 200px;
      background: var(--bg-dark-800);
      border:1px solid var(--bg-dark-700);
      border-radius:12px;
      padding:12px 16px;
      min-width:200px;
      box-shadow:0 16px 40px rgb(0 0 0 / .6);
    }

    .metric-label {
      font-size:12px;
      color: var(--text-dim);
      margin-bottom:4px;
    }
    .metric-value {
      font-size:20px;
      font-weight:600;
      color: var(--text-bright);
      line-height:1.3;
    }
    .metric-hint {
      font-size:11px;
      color: var(--text-soft);
      line-height:1.4;
      margin-top:4px;
    }

    .status-pill {
      display:inline-block;
      font-size:12px;
      font-weight:600;
      border-radius:999px;
      padding:4px 8px;
      line-height:1.2;
      border:1px solid #fff3;
    }

    .pill-green  { background:#064e3b; color:#4ade80; }
    .pill-yellow { background:#713f12; color:#fde047; }
    .pill-orange { background:#7c2d12; color:#fb923c; }
    .pill-red    { background:#7f1d1d; color:#f87171; }

    .controls-grid {
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(240px,1fr));
      gap:16px;
    }

    .control-block {
      background: var(--bg-dark-800);
      border:1px solid var(--bg-dark-700);
      border-radius:12px;
      padding:12px 16px;
      font-size:13px;
      color: var(--text-soft);
      box-shadow:0 16px 40px rgb(0 0 0 / .6);
    }

    .control-block label {
      display:block;
      font-size:12px;
      color: var(--text-dim);
      margin-bottom:4px;
    }

    .control-row {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      flex-wrap:wrap;
    }

    .control-row input[type="number"] {
      width:80px;
      background:#0f172a;
      border:1px solid var(--bg-dark-700);
      border-radius:8px;
      color:#fff;
      font-size:13px;
      padding:6px 8px;
      text-align:right;
    }

    .explain-box {
      font-size:11px;
      line-height:1.5;
      color: var(--text-dim);
      margin-top:8px;
    }

    table {
      width:100%;
      border-collapse: collapse;
      font-size:12px;
      min-width:280px;
    }

    thead {
      background: var(--bg-dark-800);
    }

    th, td {
      text-align:left;
      padding:8px 10px;
      border-bottom:1px solid var(--bg-dark-700);
      color: var(--text-soft);
      vertical-align: top;
      line-height:1.4;
    }

    th {
      color: var(--text-bright);
      font-weight:600;
      font-size:12px;
    }

    footer {
      background: var(--bg-dark-900);
      border-top:1px solid var(--bg-dark-700);
      color:#475569;
      font-size:12px;
      text-align:center;
      padding:12px 0 16px;
    }

    @media(max-width:600px){
      header {
        flex-direction: column;
        align-items:flex-start;
      }
      nav a {
        margin-left:0;
        margin-right:16px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£ ‚Äî ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</div>
    <nav>
      <a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
      <a href="map.html">‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</a>
      <a href="competition.html">‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</a>
      <a href="risk.html">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</a>
      <a href="supply.html" class="active">‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
    </nav>
  </header>

  <main>
    <!-- ‡∏™‡∏£‡∏∏‡∏õ -->
    <section class="card">
      <h2>‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏à‡∏≤‡∏Å‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå</h2>
      <div class="sub">
        ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏Ñ‡∏∑‡∏≠ ‚Äú‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢/‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ‚Äù ‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏•‡∏π‡∏Å‡∏ü‡∏π‡∏Å ‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß
        ‡∏Ç‡∏ß‡∏î PET ‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á‡πÄ‡∏´‡∏•‡πá‡∏Å/‡∏≠‡∏•‡∏π‡∏°‡∏¥‡πÄ‡∏ô‡∏µ‡∏¢‡∏° ‡∏Ø‡∏•‡∏Ø
        <br/>
        ‡πÄ‡∏£‡∏≤‡∏Ñ‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£‡πÉ‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î √ó
        ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Ç‡∏¢‡∏∞‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•/‡∏Ñ‡∏ô/‡∏ß‡∏±‡∏ô √ó
        ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á (%).
      </div>

      <div class="flex-wrap">
        <div class="metric-box">
          <div class="metric-label">‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£‡∏£‡∏ß‡∏° (‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô CSV)</div>
          <div class="metric-value" id="totalPop">-</div>
          <div class="metric-hint">‡∏Ñ‡∏ô</div>
        </div>

        <div class="metric-box">
          <div class="metric-label">
            ‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ (‡∏ï‡∏±‡∏ô / ‡∏ß‡∏±‡∏ô)
            <span id="statusPill" class="status-pill pill-green">-</span>
          </div>
          <div class="metric-value" id="tonsPerDay">-</div>
          <div class="metric-hint">
            ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏• + ‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏° % ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô
          </div>
        </div>

        <div class="metric-box">
          <div class="metric-label">‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏ï‡∏±‡∏ô / ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</div>
          <div class="metric-value" id="tonsPerMonth">-</div>
          <div class="metric-hint">‡∏Ñ‡∏π‡∏ì ~30 ‡∏ß‡∏±‡∏ô</div>
        </div>

        <div class="metric-box">
          <div class="metric-label">‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û‡∏ï‡πà‡∏≠‡∏õ‡∏µ (‡∏ï‡∏±‡∏ô / ‡∏õ‡∏µ)</div>
          <div class="metric-value" id="tonsPerYear">-</div>
          <div class="metric-hint">‡∏Ñ‡∏π‡∏ì 365 ‡∏ß‡∏±‡∏ô</div>
        </div>
      </div>
    </section>

    <!-- ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô -->
    <section class="card">
      <h2>‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì (‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ)</h2>
      <div class="controls-grid">

        <div class="control-block">
          <label for="kgPerPerson">
            ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏• / ‡∏Ñ‡∏ô / ‡∏ß‡∏±‡∏ô (‡∏Å‡∏Å.)
          </label>
          <div class="control-row">
            <div>
              <input type="number" id="kgPerPerson" step="0.01" min="0" />
              <div style="font-size:11px;color:var(--text-dim);margin-top:4px;">
                ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: 0.30
              </div>
            </div>
            <div style="font-size:12px;line-height:1.4;color:var(--text-soft);text-align:right;">
              ‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ ‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏•‡∏π‡∏Å‡∏ü‡∏π‡∏Å ‡∏Ç‡∏ß‡∏î PET
              ‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á‡πÇ‡∏•‡∏´‡∏∞ ‡∏Ø‡∏•‡∏Ø
            </div>
          </div>
          <div class="explain-box">
            ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏ó‡∏¢ ‡∏Ç‡∏¢‡∏∞‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏£‡∏ß‡∏° ~1 ‡∏Å‡∏Å./‡∏Ñ‡∏ô/‡∏ß‡∏±‡∏ô
            ‡πÇ‡∏î‡∏¢‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡πÑ‡∏î‡πâ (‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© ‡∏Å‡∏•‡πà‡∏≠‡∏á ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÅ‡∏Ç‡πá‡∏á‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡πÑ‡∏î‡πâ ‡πÇ‡∏•‡∏´‡∏∞) ‡∏°‡∏±‡∏Å‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏≤‡∏ß
            20‚Äì35% ‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            ‚áí ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 0.20‚Äì0.35 ‡∏Å‡∏Å./‡∏Ñ‡∏ô/‡∏ß‡∏±‡∏ô ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏£‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 0.30
          </div>
        </div>

        <div class="control-block">
          <label for="recoveryRate">
            ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ (%)
          </label>
          <div class="control-row">
            <div>
              <input type="number" id="recoveryRate" step="1" min="0" max="100" />
              <div style="font-size:11px;color:var(--text-dim);margin-top:4px;">
                ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: 40
              </div>
            </div>
            <div style="font-size:12px;line-height:1.4;color:var(--text-soft);text-align:right;">
              ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞ "‡πÑ‡∏î‡πâ‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á"
              ‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏õ‡∏ô‡πÄ‡∏õ‡∏∑‡πâ‡∏≠‡∏ô / ‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏ß‡∏° ‡∏Ø‡∏•‡∏Ø
            </div>
          </div>
          <div class="explain-box">
            ‡∏ñ‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏¢‡∏Å‡∏î‡∏µ (‡∏°‡∏µ‡∏ã‡∏≤‡πÄ‡∏•‡πâ‡∏á/‡∏£‡πâ‡∏≤‡∏ô‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô) ‡∏Ñ‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô
            ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏¢‡∏≤‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå‡∏´‡πà‡∏≤‡∏á‡πÑ‡∏Å‡∏• ‡∏Ñ‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ï‡πà‡∏≥‡∏•‡∏á
          </div>
        </div>

      </div>
    </section>

    <!-- ‡∏£‡∏≤‡∏¢‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ -->
    <section class="card">
      <h2>Breakdown ‡∏£‡∏≤‡∏¢‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</h2>
      <div class="sub">
        ‡∏Ñ‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ (‡∏Å‡∏Å./‡∏Ñ‡∏ô/‡∏ß‡∏±‡∏ô ‡πÅ‡∏•‡∏∞ % ‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡∏±‡∏ö)
        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡πÑ‡∏´‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
      </div>

      <div style="overflow-x:auto;">
        <table>
          <thead>
            <tr>
              <th>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</th>
              <th>‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£</th>
              <th>‡∏ï‡∏±‡∏ô/‡∏ß‡∏±‡∏ô<br/>(‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ)</th>
              <th>‡∏ï‡∏±‡∏ô/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</th>
              <th>‡∏ï‡∏±‡∏ô/‡∏õ‡∏µ</th>
            </tr>
          </thead>
          <tbody id="districtTableBody">
            <!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ JS -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ -->
    <section class="card">
      <h2>‡∏ß‡∏¥‡∏ò‡∏µ‡∏≠‡πà‡∏≤‡∏ô‡∏™‡∏µ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û üü¢üü°üü†üî¥</h2>
      <div class="sub">
        ‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å "‡∏ï‡∏±‡∏ô/‡∏ß‡∏±‡∏ô (‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ)" ‡∏ó‡∏±‡πâ‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:
      </div>

      <div style="font-size:13px;line-height:1.6;color:var(--text-soft);">
        <div class="legend-row" style="display:flex;align-items:center;gap:8px;">
          <span class="status-pill pill-green">üü¢ ‡∏ï‡πà‡∏≥</span>
          <div><strong>&lt; 20 ‡∏ï‡∏±‡∏ô/‡∏ß‡∏±‡∏ô</strong> ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡πÑ‡∏°‡πà‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏Å ‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏¢‡πà‡∏≠‡∏¢ ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏ö‡∏ö point-to-point</div>
        </div>

        <div class="legend-row" style="display:flex;align-items:center;gap:8px;">
          <span class="status-pill pill-yellow">üü° ‡∏Å‡∏•‡∏≤‡∏á</span>
          <div><strong>20‚Äì50 ‡∏ï‡∏±‡∏ô/‡∏ß‡∏±‡∏ô</strong> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ö logistics ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡∏Ñ‡∏•‡∏±‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå</div>
        </div>

        <div class="legend-row" style="display:flex;align-items:center;gap:8px;">
          <span class="status-pill pill-orange">üü† ‡∏™‡∏π‡∏á</span>
          <div><strong>50‚Äì100 ‡∏ï‡∏±‡∏ô/‡∏ß‡∏±‡∏ô</strong> ‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô ‡∏Ñ‡∏∏‡πâ‡∏°‡∏ï‡∏±‡πâ‡∏á drop-off hub / ‡∏Ñ‡∏•‡∏±‡∏á‡∏¢‡πà‡∏≠‡∏¢</div>
        </div>

        <div class="legend-row" style="display:flex;align-items:center;gap:8px;">
          <span class="status-pill pill-red">üî¥ ‡∏°‡∏≤‡∏Å</span>
          <div><strong>&gt; 100 ‡∏ï‡∏±‡∏ô/‡∏ß‡∏±‡∏ô</strong> ‡∏°‡∏µ‡∏£‡∏∞‡∏î‡∏±‡∏ö supply ‡πÉ‡∏´‡∏ç‡πà‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å / ‡∏ö‡∏î / ‡∏≠‡∏±‡∏î‡∏Å‡πâ‡∏≠‡∏ô‡∏Ç‡∏ô‡∏≤‡∏î‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°</div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    ¬© ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏• ¬∑ ‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£ ¬∑ Prototype (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏™‡∏î‡∏à‡∏≤‡∏Å CSV)
  </footer>

  <script>
    // -----------------------------
    // ‡πÇ‡∏´‡∏•‡∏î CSV ‡∏ï‡∏≥‡∏ö‡∏• ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏≥‡πÄ‡∏†‡∏≠
    // subdistricts.csv format (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ):
    // ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠,‡∏ï‡∏≥‡∏ö‡∏•_TH,‡∏ï‡∏≥‡∏ö‡∏•_ENG,‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£,‡∏û‡∏¥‡∏Å‡∏±‡∏î
    // -----------------------------

    // parse CSV -> array objects
    function parseSubdistrictCSV(csvText){
      const lines = csvText.trim().split("\n");
      const out = [];

      // ‡∏ï‡∏£‡∏ß‡∏à header
      let startIndex = 0;
      const headerLower = lines[0].toLowerCase();
      const hasHeader =
        headerLower.includes("‡∏≠‡∏≥‡πÄ‡∏†‡∏≠") ||
        headerLower.includes("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£");
      if (hasHeader) startIndex = 1;

      for (let i = startIndex; i < lines.length; i++){
        const row = lines[i].trim();
        if (!row) continue;

        // ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤ assume ‡πÑ‡∏°‡πà‡∏°‡∏µ "..." ‡πÉ‡∏ô‡∏Å‡∏•‡∏≤‡∏á (‡πÑ‡∏ü‡∏•‡πå‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≠‡∏°‡∏°‡πà‡∏≤‡∏Ñ‡∏£‡∏≠‡∏ö)
        const parts = row.split(",").map(v => v.trim());

        if (parts.length < 5) continue;

        const amphoe = parts[0];
        const tambonTH = parts[1];
        // const tambonEN = parts[2];
        const popStr = parts[3];
        // const coord = parts[4];

        // popStr ‡∏≠‡∏≤‡∏à‡∏°‡∏µ comma (38,607) ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏ö comma ‡∏Å‡πà‡∏≠‡∏ô parse
        const cleanPop = popStr.replace(/,/g,"");
        const pop = parseInt(cleanPop,10);
        if (isNaN(pop)) continue;

        out.push({
          amphoe: amphoe,
          tambonTH: tambonTH,
          population: pop
        });
      }

      return out;
    }

    // group by amphoe
    function groupByAmphoe(subdistrictRows){
      const amphoeMap = {}; // { amphoe: totalPop }
      subdistrictRows.forEach(r=>{
        if (!amphoeMap[r.amphoe]){
          amphoeMap[r.amphoe] = 0;
        }
        amphoeMap[r.amphoe] += r.population;
      });

      // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô array
      const arr = Object.keys(amphoeMap).map(amphoeName=>({
        amphoe: amphoeName,
        population: amphoeMap[amphoeName]
      }));
      return arr;
    }

    // -----------------------------
    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏• (‡∏ï‡∏±‡∏ô)
    // totalPop: ‡∏Ñ‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    // kgPerPersonPerDay: ‡∏Å‡∏Å./‡∏Ñ‡∏ô/‡∏ß‡∏±‡∏ô ‡∏Ç‡∏≠‡∏á "‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡πÑ‡∏î‡πâ"
    // recoveryRate: % ‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ
    // return {tonsDay, tonsMonth, tonsYear}
    // -----------------------------
    function calcTonnage(totalPop, kgPerPersonPerDay, recoveryRatePct){
      // ‡∏Å‡∏Å./‡∏ß‡∏±‡∏ô‡∏£‡∏ß‡∏° (‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏±‡∏Å loss)
      const kgDayRaw = totalPop * kgPerPersonPerDay;

      // ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á
      const kgDayRecovered = kgDayRaw * (recoveryRatePct/100);

      const tonsPerDay = kgDayRecovered / 1000; // 1000 kg = 1 ton
      const tonsPerMonth = tonsPerDay * 30;
      const tonsPerYear  = tonsPerDay * 365;

      return {
        tonsPerDay,
        tonsPerMonth,
        tonsPerYear
      };
    }

    // format ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏™‡∏ß‡∏¢ ‡πÜ
    function fmt(n, digits=2){
      if (isNaN(n)) return "-";
      return n.toLocaleString("th-TH", {
        minimumFractionDigits: digits,
        maximumFractionDigits: digits
      });
    }
    function fmtInt(n){
      if (isNaN(n)) return "-";
      return n.toLocaleString("th-TH");
    }

    // ‡πÉ‡∏´‡πâ‡∏™‡∏µ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ï‡∏≤‡∏° tons/day
    function classifyStatus(tonsPerDay){
      // üü¢ <20, üü° 20-50, üü† 50-100, üî¥ >100
      if (tonsPerDay > 100){
        return {text:"üî¥ ‡∏°‡∏≤‡∏Å", cls:"pill-red"};
      } else if (tonsPerDay > 50){
        return {text:"üü† ‡∏™‡∏π‡∏á", cls:"pill-orange"};
      } else if (tonsPerDay > 20){
        return {text:"üü° ‡∏Å‡∏•‡∏≤‡∏á", cls:"pill-yellow"};
      } else {
        return {text:"üü¢ ‡∏ï‡πà‡∏≥", cls:"pill-green"};
      }
    }

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏≥‡πÄ‡∏†‡∏≠
    function renderDistrictTable(amphoeArr, kgPerPersonPerDay, recoveryRatePct){
      const tbody = document.getElementById("districtTableBody");
      tbody.innerHTML = "";

      amphoeArr.forEach(row=>{
        const pop = row.population;
        const {tonsPerDay, tonsPerMonth, tonsPerYear} =
          calcTonnage(pop, kgPerPersonPerDay, recoveryRatePct);

        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td style="white-space:nowrap;font-weight:600;color:#fff;">${row.amphoe}</td>
          <td>${fmtInt(pop)} ‡∏Ñ‡∏ô</td>
          <td>${fmt(tonsPerDay,2)}</td>
          <td>${fmt(tonsPerMonth,1)}</td>
          <td>${fmt(tonsPerYear,0)}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏ô‡∏™‡∏∏‡∏î
    function renderSummary(totalPop, kgPerPersonPerDay, recoveryRatePct){
      const totalPopEl = document.getElementById("totalPop");
      const tonsPerDayEl = document.getElementById("tonsPerDay");
      const tonsPerMonthEl = document.getElementById("tonsPerMonth");
      const tonsPerYearEl = document.getElementById("tonsPerYear");
      const statusPillEl = document.getElementById("statusPill");

      totalPopEl.textContent = fmtInt(totalPop);

      const {tonsPerDay, tonsPerMonth, tonsPerYear} =
        calcTonnage(totalPop, kgPerPersonPerDay, recoveryRatePct);

      tonsPerDayEl.textContent   = fmt(tonsPerDay,2);
      tonsPerMonthEl.textContent = fmt(tonsPerMonth,1);
      tonsPerYearEl.textContent  = fmt(tonsPerYear,0);

      const st = classifyStatus(tonsPerDay);
      statusPillEl.textContent = st.text;
      statusPillEl.className = "status-pill " + st.cls;
    }

    // main flow:
    // 1. load CSV
    // 2. parse & group
    // 3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ default controls
    // 4. render ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤
    let globalState = {
      totalPop: 0,
      amphoeArr: [],
      kgPerPersonPerDay: 0.30, // ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
      recoveryRatePct: 40      // %
    };

    function recalcAndRender(){
      renderSummary(
        globalState.totalPop,
        globalState.kgPerPersonPerDay,
        globalState.recoveryRatePct
      );
      renderDistrictTable(
        globalState.amphoeArr,
        globalState.kgPerPersonPerDay,
        globalState.recoveryRatePct
      );
    }

    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ input listeners
    function setupControls(){
      const kgInput = document.getElementById("kgPerPerson");
      const recInput = document.getElementById("recoveryRate");

      kgInput.value = globalState.kgPerPersonPerDay.toString();
      recInput.value = globalState.recoveryRatePct.toString();

      kgInput.addEventListener("input", ()=>{
        const v = parseFloat(kgInput.value);
        if (!isNaN(v) && v >= 0){
          globalState.kgPerPersonPerDay = v;
          recalcAndRender();
        }
      });

      recInput.addEventListener("input", ()=>{
        const v = parseFloat(recInput.value);
        if (!isNaN(v) && v >= 0 && v <= 100){
          globalState.recoveryRatePct = v;
          recalcAndRender();
        }
      });
    }

    // ‡πÇ‡∏´‡∏•‡∏î CSV ‡∏à‡∏£‡∏¥‡∏á
    fetch("data/subdistricts.csv",{cache:"no-store"})
      .then(res=>res.text())
      .then(csvText=>{
        const rows = parseSubdistrictCSV(csvText);
        const amphoeArr = groupByAmphoe(rows);

        // ‡∏£‡∏ß‡∏°‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î
        const totalPop = amphoeArr.reduce((sum,r)=>sum+r.population,0);

        globalState.totalPop = totalPop;
        globalState.amphoeArr = amphoeArr;

        setupControls();
        recalcAndRender();
      })
      .catch(err=>{
        console.error("‡πÇ‡∏´‡∏•‡∏î subdistricts.csv ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ:", err);
        alert("‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£ subdistricts.csv ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ");
      });
  </script>
</body>
</html>
